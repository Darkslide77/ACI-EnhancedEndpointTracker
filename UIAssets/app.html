<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="locale" content="US">
        <meta name="language" content="en">
        <meta name="country" content="US">
        <meta name="HandheldFriendly" content="True">
        <meta name="MobileOptimized" content="320">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link type="text/css" rel="stylesheet" href="js/lib/select2/select2.min.css">
        <link type="text/css" rel="stylesheet" href="css/cui-1.3.3-official/css/cui-standard.min.css">
        <script type='text/javascript' src='js/lib/jquery-3.1.1.min.js'></script>
        <script type='text/javascript' src='js/lib/json2.js'></script>
        <script type='text/javascript' src='js/lib/js.cookie.js'></script>
        <script type='text/javascript' src='js/lib/knockout-3.4.2.js'></script>
        <script type='text/javascript' src='js/lib/moment.min.js'></script>
        <script type='text/javascript' src='js/lib/select2/select2.full.min.js'></script>
        <script type='text/javascript' src='js/common.js'></script>
        <script type='text/javascript' src='js/ko-table.js'></script>
        <script type='text/javascript' src='js/ept.js'></script>
        <script type='text/javascript' src='js/app.js'></script>
    </head>
    <body class="cui">

    <!-- single modal backdrop required -->
    <div class="modal-backdrop hide"></div>

    <!-- common alert/error modal -->
    <div class="modal modal-alert modal--small hide">
        <div class="modal__dialog">
            <div class="modal__content">
                <div class="modal__body">
                    <div class="alert alert--danger">
                        <div class="alert__icon icon-danger-outline"></div>
                        <div class="alert__message text-left">
                            <div class="half-margin-top">
                                <span class="text-large text-danger">Error</span>
                                <p id="modal-alert-content"></p>
                            </div>
                            <div class="text-center base-margin-top">
                                <button class="btn btn--small btn--gray-ghost" onclick="hideModal()">Close</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- common info modal -->
    <div class="modal modal-info modal--large hide">
        <div class="modal__dialog">
            <div class="modal__content">
                <a class="modal__close" onclick="hideModal()"><span class="icon-close"></span></a>
                <div class="modal__body">
                    <div class="alert">
                        <div class="alert__icon icon-info-outline"></div>
                        <div class="alert__message text-left">
                            <div class="half-margin-top">
                                <p id="modal-info-content"></p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal__footer">
                    <button class="btn btn btn--gray-ghost" onclick="hideModal()">Close</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- common confirm modal -->
    <div class="modal modal-confirm modal--large hide">
        <div class="modal__dialog">
            <div class="modal__content">
                <a class="modal__close" onclick="hideModal()"><span class="icon-close"></span></a>
                <div class="modal__body">
                    <div class="alert">
                        <div class="alert__icon icon-info-outline"></div>
                        <div class="alert__message text-left">
                            <div class="half-margin-top">
                                <p id="modal-confirm-content"></p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal__footer">
                    <button class="btn btn btn--gray-ghost" onclick="hideModal()">Close</button>
                    <button class="btn btn btn--gray-ghost" onclick="confirmedModal()">Proceed</button>
                </div>
            </div>
        </div>
    </div>

    <!-- new fabric modal -->
    <div class="modal modal-form modal--large hide">
        <div class="modal__dialog">
            <div class="modal__content">
                <a class="modal__close" onclick="hideModal()"><span class="icon-close"></span></a>
                <div class="modal__body">
                    <h5>
                        <div class="form-group ">
                            <div class="form-group__text">
                                <input type="text" data-bind="value: new_fabric_name" />
                                <label>Fabric Name</label>
                            </div>
                        </div>
                    </h5>
                </div>
                <div class="modal__footer" data-bind="loadingWhen: fabric_isLoading">
                    <button class="btn btn btn--gray-ghost" onclick="hideModal()">Close</button>
                    <button class="btn btn--primary" data-bind="click: create_fabric">Submit</button>
                </div>
            </div>
        </div>
    </div>

    <!-- clear endpoint modal -->
    <div class="modal modal-form-clear modal--large hide">
        <div class="modal__dialog">
            <div class="modal__content">
                <a class="modal__close" onclick="hideModal()"><span class="icon-close"></span></a>
                <div class="modal__body">
                    <div class="row">
                        <div class="col-md-2">
                            <h6>Nodes</h6>
                        </div>
                        <div class="col-md-9 text-left">
                            <h6>
                                <select required id="clearEndpointSelect" multiple="multiple" style="width:100%"></select>
                                <div class="qtr-margin-top">
                                    <span class=A"text-muted">Example: 101-102, 105</span>
                                </div>
                            </h6>
                        </div>
                    </div>
                </div>
                <div class="modal__footer" data-bind="loadingWhen: clear_endpoint_isLoading">
                    <button class="btn btn btn--gray-ghost" onclick="hideModal()">Close</button>
                    <button class="btn btn--negative" data-bind="click: function(){submit_clear_endpoint()}">
                        <span class="icon icon-exclamation-triangle"></span> Clear Endpoint
                    </button>
                </div>
            </div>
        </div>
    </div>
    
	<!-- page content container -->
    <div class="content-fluid">
        <main>
    		<!-- page header -->
    		<header class="header header--compressed" data-bind="visible: !app_mode()">
    		    <div class="header-bar container">
                    <a class="header-bar__logo">
                        <span class="icon-cisco"></span>
                    </a>
    		        <div class="header-bar__main">
    		            <div class="header-heading">
    		                <h1 class="page-title">Endpoint Tracker</h1>
    		            </div>
    		        </div>
                    <div>
                        <a href="#/" class="btn btn--small btn--icon" data-balloon="Dashboard" data-balloon-pos="down">
                            <span class="icon-computer"></span>
                        </a><a class="btn btn--small btn--icon" data-balloon="Accounts" data-balloon-pos="down">
                            <span class="icon-user"></span>
                        </a><a class="btn btn--small btn--icon" data-balloon="Help" data-balloon-pos="down">
                            <span class="icon-help"></span>
                        </a><a class="btn btn--small btn--icon btn--negative" data-balloon="Sign-out" data-balloon-pos="down">
                            <span class="icon-sign-out"></span>
                        </a>
                    </div>
    		    </div>
    		</header>
			<!-- end header -->

            <!-- page content -->
            <div class="content content-fluid">
                <div class="container">
                    <div class="section" data-bind="loadingWhen: isLoading">
                        <!-- search (shared by case and decode) -->
                        <div>
                            <div class="row text-small">
                                <div class="col-md-12">
                                    <div class="form-group">
                                        <div class="form-group__text">
                                            <select  type="search" required id="searchBar"></select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- search end -->

                        <!-- per-endpoint detail pane -->
                        <div data-bind="visible: view_endpoint, loadingWhen: endpoint_isLoading"
                            class="content content--alt half-margin-top half-padding">
                            <blockquote data-bind="visible: current_endpoint_not_found()">
                                <h3>No data for <span data-bind="text:endpoint_detail_addr"></span></h3>
                            </blockquote>
                            <blockquote data-bind="visible: !current_endpoint_not_found(), css: current_endpoint.blockquote_css">
                                <h3>
                                    <span class="label--large" data-bind="css: current_endpoint.type_css, text:current_endpoint.type"></span>
                                    <span data-bind="css: current_endpoint.addr_css, text:current_endpoint.addr"></span>
                                </h3>
                                <div class="qtr-margin-top" data-bind="visible: current_endpoint.is_offsubnet">
                                    <span class="label label label--danger">OffSubnet</span>
                                    Nodes:
                                    <span data-bind="foreach: { data: current_endpoint.offsubnet_nodes(), as: 'n' }">
                                        <span class="label label--dkgray" data-bind="text: n"></span>
                                    </span>
                                </div>
                                <div class="qtr-margin-top" data-bind="visible: current_endpoint.is_stale">
                                    <span class="label label label--danger">Stale</span>
                                    Nodes:
                                    <span data-bind="foreach: { data: current_endpoint.stale_nodes(), as: 'n' }">
                                        <span class="label label--dkgray" data-bind="text: n"></span>
                                    </span>
                                </div>
                                <div class="qtr-margin-top" data-bind="visible: current_endpoint.is_rapid">
                                    <span class="label label label--danger">Rapid</span>
                                    triggered at <span data-bind="text: current_endpoint.is_rapid_ts_str"></span>
                                </div>
                                <div class="qtr-margin-top">
                                    Fabric <span class="text-bold" data-bind="text:current_endpoint.fabric"></span>
                                    <span data-bind="text:current_endpoint.vnid_identifier"></span>
                                    <span class="text-bold" data-bind="text:current_endpoint.vnid_value"></span>
                                    EPG <span class="text-bold" data-bind="text:current_endpoint.epg_name"></span>
                                </div>
                                <div class="qtr-margin-top" data-bind="visible: current_endpoint.is_deleted()">
                                    <span class="label label--dkgray">Not local on any node</span>
                                </div>
                                <div class="qtr-margin-top" data-bind="visible: !current_endpoint.is_deleted()">
                                    Local on node <span class="text-bold" data-bind="text:current_endpoint.local_node"></span>
                                    interface <span class="text-bold" data-bind="text: current_endpoint.local_interface"></span>
                                    encap <span class="text-bold" data-bind="text: current_endpoint.local_encap"></span>
                                    <span data-bind="visible: current_endpoint.local_mac().length>0">
                                        mac 
                                        <a data-bind="attr: { href: current_endpoint.local_mac_href }">
                                            <span class="text-bold" data-bind="text: current_endpoint.local_mac"></span>
                                        </a>
                                    </span>
                                </div>
                                <div class="qtr-margin-top" data-bind="!current_endpoint.is_deleted()">
                                    <span class="label" data-bind="text:current_endpoint.count_moves"></span> moves,
                                    <span class="label" data-bind="text:current_endpoint.count_offsubnet"></span> offsubnet events,
                                    <span class="label" data-bind="text:current_endpoint.count_stale"></span> stale events,
                                    <span class="label" data-bind="text:current_endpoint.count_rapid"></span> rapid events,
                                    <span class="label" data-bind="text:current_endpoint.count_nodes"></span> nodes
                                </div>
                                <!-- endpoint control -->
                                <div class="half-margin-top">
                                    <button class="btn btn--small btn--secondary" data-bind="
                                            enable: admin_role,
                                            click: function(){endpoint_force_refresh()}
                                            ">
                                        <span class="icon icon-refresh"></span>
                                        Dataplane refresh
                                    </button>
                                    <button class="btn btn--small btn--gray-ghost" data-bind="
                                            enable: admin_role,
                                            click: function(){endpoint_force_delete()}
                                            ">
                                        <span class="icon icon-trash"></span>
                                        Delete events
                                    </button>
                                    <button class="btn btn--small btn--negative" data-bind="
                                            enable: admin_role,
                                            click: function(){endpoint_force_clear()}
                                            ">
                                        <span class="icon icon-exclamation-triangle"></span>
                                        Clear endpoint
                                    </button>
                                </div>
                                <!-- end endpoint control -->
                            </blockquote>
                        </div>
                        <!-- end per-endpoint detail pane -->

                        <!-- dashboard start -->
                        <div class="content content--alt half-margin-top half-padding">

                            <!-- per-endpoint tabs selection -->
                            <div class="qtr-padding" data-bind="visible: view_endpoint"> 
                                <ul class="tabs">
                                    <li class="tab" data-bind="css: endpoint_detail_active_tab('history')">
                                        <a tabindex="0" data-bind="attr:{ href:endpoint_detail_tab_link()+'/history' }">
                                            <div class="tab__heading">
                                                <span class="icon-clock"></span>
                                                History
                                            </div>
                                        </a>
                                    </li>
                                    <li class="tab" data-bind="css: endpoint_detail_active_tab('detailed')">
                                        <a tabindex="0" data-bind="attr:{ href:endpoint_detail_tab_link()+'/detailed' }">
                                            <div class="tab__heading">
                                                <span class="icon-search"></span>
                                                Detailed
                                            </div>
                                        </a>
                                    </li>
                                    <li class="tab" data-bind="css: endpoint_detail_active_tab('moves')">
                                        <a tabindex="0" data-bind="attr:{ href:endpoint_detail_tab_link()+'/moves' }">
                                            <div class="tab__heading">
                                                <span class="icon-panel-shift-right"></span>
                                                Moves
                                            </div>
                                        </a>
                                    </li>
                                    <li class="tab" data-bind="css: endpoint_detail_active_tab('offsubnet')">
                                        <a tabindex="0" data-bind="attr:{ href:endpoint_detail_tab_link()+'/offsubnet' }">
                                            <div class="tab__heading">
                                                <span class="icon-jump-out"></span>
                                                OffSubnet
                                            </div>
                                        </a>
                                    </li>
                                    <li class="tab" data-bind="css: endpoint_detail_active_tab('stale')">
                                        <a tabindex="0" data-bind="attr:{ href:endpoint_detail_tab_link()+'/stale' }">
                                            <div class="tab__heading">
                                                <span class="icon-warning-outline"></span>
                                                Stale
                                            </div>
                                        </a>
                                    </li>
                                    <li class="tab" data-bind="css: endpoint_detail_active_tab('rapid')">
                                        <a tabindex="0" data-bind="attr:{ href:endpoint_detail_tab_link()+'/rapid' }">
                                            <div class="tab__heading">
                                                <span class="icon-too-fast"></span>
                                                Rapid
                                            </div>
                                        </a>
                                    </li>
                                    <li class="tab" data-bind="css: endpoint_detail_active_tab('remediate')">
                                        <a tabindex="0" data-bind="attr:{ href:endpoint_detail_tab_link()+'/remediate' }">
                                            <div class="tab__heading">
                                                <span class="icon-delete"></span>
                                                Cleared
                                            </div>
                                        </a>
                                    </li>
                                </ul>
                            </div>
                            <!-- end per-endpoint tabs selection -->


                            <!-- dashboard tabs selection -->
                            <div class="qtr-padding" data-bind="visible: view_dashboard"> 
                                <ul class="tabs">
                                    <li class="tab" data-bind="css: dashboard_active_tab('dashboard_fabric')+dashboard_active_tab('dashboard_fabric_events')">
                                        <a tabindex="0" href="#/">
                                            <div class="tab__heading">
                                                <span class="icon-computer"></span> Fabric
                                            </div>
                                        </a>
                                    </li>
                                    <li class="tab" data-bind="css: dashboard_active_tab('dashboard_endpoints')">
                                        <a tabindex="0" href="#/endpoints">
                                            <div class="tab__heading">
                                                <span class="icon-virtual-machine"></span> Endpoints
                                            </div>
                                        </a>
                                    </li>
                                    <li class="tab" data-bind="css: dashboard_active_tab('dashboard_moves')">
                                        <a tabindex="0" href="#/moves">
                                            <div class="tab__heading">
                                                <span class="icon-panel-shift-right"></span> Moves
                                            </div>
                                        </a>
                                    </li>
                                    <li class="tab" data-bind="css: dashboard_active_tab('dashboard_offsubnet')">
                                        <a tabindex="0" href="#/offsubnet">
                                            <div class="tab__heading">
                                                <span class="icon-jump-out"></span> OffSubnet
                                            </div>
                                        </a>
                                    </li>
                                    <li class="tab" data-bind="css: dashboard_active_tab('dashboard_stale')">
                                        <a tabindex="0" href="#/stale">
                                            <div class="tab__heading">
                                                <span class="icon-warning-outline"></span> Stale
                                            </div>
                                        </a>
                                    </li>
                                    <li class="tab" data-bind="css: dashboard_active_tab('dashboard_rapid')">
                                        <a tabindex="0" href="#/rapid">
                                            <div class="tab__heading">
                                                <span class="icon-too-fast"></span> Rapid
                                            </div>
                                        </a>
                                    </li>
                                    <li class="tab" data-bind="css: dashboard_active_tab('dashboard_remediate')">
                                        <a tabindex="0" href="#/remediate">
                                            <div class="tab__heading">
                                                <span class="icon-delete"></span> Cleared
                                            </div>
                                        </a>
                                    </li>
                                    <!--li class="tab" data-bind="css: dashboard_active_tab('dashboard_latest_events')">
                                        <a tabindex="0" href="#/events">
                                            <div class="tab__heading">
                                                <span class="icon-analysis"></span> Latest Events
                                            </div>
                                        </a>
                                    </li-->
                                </ul>
                            </div>
                            <!-- dashboard tabs end -->

                            <!-- main table content -->
                            <div class="qtr-padding">
                                <div class="row" data-bind="visible: historical_tab">
                                    <div class="col-md-12">
                                        <div class="alert qtr-margin-top qtr-margin-bottom">
                                            <div class="alert__icon icon-info-outline"></div>
                                            <div class="alert__message" data-bind="">
                                                These are historical records. Check the 
                                                <span class="text-bold">Endpoints</span> tab to
                                                validate the current status.
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-5">
                                        <span data-bind="visible: table.back_enabled()">
                                            <button class="btn btn--small btn--icon" 
                                                    data-bind="click: function(){table.go_back()}"
                                                    data-balloon="Back" data-balloon-pos="down">
                                                <span  class="icon-back"></span>
                                            </button>
                                        </span>
                                        <span data-bind="visible: table.refresh_enabled()">
                                            <button class="btn btn--small btn--icon" 
                                                    data-bind="click: function(){table.refresh_data()}" 
                                                    data-balloon="Refresh" data-balloon-pos="down">
                                                <span class="icon-refresh"></span>
                                            </button>
                                        </span>
                                        <span data-bind="foreach: { data: table.buttons, as: 'c' }">
                                            <button class="btn btn--small btn--icon" 
                                                data-bind="click: function(){c.click()},
                                                            css: c.btn_status(),
                                                            visible: c.visible(),
                                                            attr: { 
                                                                'data-balloon': c.balloon, 
                                                                'data-balloon-pos': c.balloon_pos,
                                                                'disabled': c.disabled
                                                            } ">
                                                <span data-bind="css: c.icon"></span>
                                            </button>
                                        </span>
                                    </div>
                                    <div class="col-md-2">
                                        <div class="half-margin-top" data-bind="visible: table.title().length>0">
                                            <h4 data-bind="text: table.title()"></h4>
                                        </div>
                                    </div>
                                    <div class="col-md-5">
                                        <div class="text-right" data-bind="foreach: { data: table.toggles, as: 'toggle' }">
                                            <div class="qtr-margin form-group form-group--inline">
                                                <label class="switch">
                                                    <input type="checkbox" data-bind="checked: toggle.checked">
                                                    <span class="switch__input"></span>
                                                    <span class="switch__label" data-bind="text: toggle.label"></span>
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="responsive-table" data-bind="loadingWhen: table.isLoading()">
                                    <table class="table table--fixed table--wrap table--hover table--highlight">
                                        <thead>
                                            <tr data-bind="foreach: { data: table.headers, as: 'h' }">
                                                <th data-bind="css: h.get_css(),
                                                        style: {width: h.width()}, 
                                                        click: function(){$root.table.toggle_sort(h)}
                                                        ">
                                                    <span data-bind="text: h.title()"></span>
                                                    <span data-bind="css: h.get_sort_css()"></span>
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody data-bind="foreach: { data: table.get_paged_rows, as: 'r' }">
                                            <tr data-bind="foreach: { data: $root.table.headers, as: 'h' }">
                                                <td style="word-wrap:break-word">
                                                    <span data-bind="html: r.get_attribute_html(h.name())"></span>
                                                    <span data-bind="visible: h.control().length>0">
                                                        <span data-bind="foreach: { data: h.control, as: 'c' }"><button 
                                                                class="btn btn--small btn--icon" 
                                                                data-bind="click: function(){c.click(r.data)},
                                                                               css: c.btn_status(),
                                                                               attr: { 
                                                                                'data-balloon': c.balloon, 
                                                                                'data-balloon-pos': c.balloon_pos,
                                                                                'disabled': c.disabled
                                                                               } ">
                                                                <span data-bind="css: c.icon"></span>
                                                            </button></span>
                                                    </span>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                    <div data-bind="visible: table.rows().length==0 && table.display_no_data()">
                                        <div class="base-margin-top">
                                            <span data-bind="text: table.no_data_message"></span>
                                        </div>
                                    </div>
                                    <div data-bind="visible: table.page_enabled() && table.get_total_count()>0">
                                        <div class="text-right base-margin">
                                                <div class="pull-left qtr-margin">Total 
                                                    <span class="text-bold" data-bind="text: table.get_total_count()"></span>
                                                    <span data-bind="visible: table.get_total_count_wrapped()>0">
                                                        limited to 
                                                        <span class="text-bold" data-bind="text: table.get_total_count_wrapped()"></span>
                                                    </span>
                                                </div>
                                            <div data-bind="visible: table.get_total_pages()>1">
                                                <a data-bind="click: function(){table.pager('first')}">
                                                    <span class="label label--circle label--info qtr-padding icon-step-backward" ></span>
                                                </a>
                                                <a data-bind="click: function(){table.pager('prev')}">
                                                    <span class="label label--circle label--info qtr-padding icon-step-prev" ></span>
                                                </a>
                                                <span data-bind="foreach: { data: table.get_in_view_pages(), as: 'p' }">
                                                    <a data-bind="click: function(){$root.table.pager(p)}">
                                                        <span class="label qtr-padding" data-bind="text: p, css: $root.table.get_page_css(p)" ></span>
                                                    </a>
                                                </span>
                                                <a data-bind="click: function(){table.pager('next')}">
                                                    <span class="label label--circle label--info qtr-padding icon-step-next" ></span>
                                                </a>
                                                <a data-bind="click: function(){table.pager('last')} ">
                                                    <span class="label label--circle label--info qtr-padding icon-step-forward"></span>
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                            <!-- main table content end -->

                            <!-- fabric settings -->
                            <div class="qtr-padding" data-bind="visible: view_edit_fabric, loadingWhen: fabric_isLoading"> 
                                <div data-bind="visible: current_fabric_not_found()">
                                    <div class="text-center base-margin">
                                        <h1 data-bind="text: current_fabric_name"></h1>
                                        <h2 class="subheading">fabric not found or insufficient privileges to view settings</h2>
                                    </div>
                                </div>
                                <div class="row" data-bind="visible: !current_fabric_not_found()">
                                    <div class="col-md-2">
                                        <button class="btn btn--small btn--icon" data-balloon="Back" data-balloon-pos="down"
                                            data-bind="click: function(){forward('#/')}">
                                            <span class="icon-back"></span>
                                        </button>
                                        <button class="btn btn--small btn--icon btn--primary" data-balloon="Save" data-balloon-pos="down"
                                            data-bind="click: function(){save_fabric()}">
                                            <span class="icon-save"></span>
                                        </button>
                                        <button class="btn btn--small btn--icon btn--negative" data-balloon="Delete" data-balloon-pos="down"
                                            data-bind="visible: !app_mode(), click: function(){delete_fabric()}">
                                            <span class="icon-trash"></span>
                                        </button>
                                    </div>
                                    <div class="col-md-10">
                                        <h3 data-bind="text: current_fabric_name"></h3>
                                    </div>
                                </div>
                                <div class="row half-margin-top" data-bind="visible: !current_fabric_not_found()">
                                    <div class="col-md-2">
                                        <ul class="tabs tabs--vertical">
                                            <li class="tab" data-bind="css: edit_fabric_active_tab('connectivity')">
                                                <a tabindex="0" data-bind="attr:{ href:edit_fabric_tab_link()+'/connectivity' }">
                                                    <div class="tab__heading">Connectivity</div>
                                                </a>
                                            </li>
                                            <li class="tab" data-bind="css: edit_fabric_active_tab('notifications')">
                                                <a tabindex="0" data-bind="attr:{ href:edit_fabric_tab_link()+'/notifications' }">
                                                    <div class="tab__heading">Notifications</div>
                                                </a>
                                            </li>
                                            <li class="tab" data-bind="css: edit_fabric_active_tab('remediate')">
                                                <a tabindex="0" data-bind="attr:{ href:edit_fabric_tab_link()+'/remediate' }">
                                                    <div class="tab__heading">Remediate</div>
                                                </a>
                                            </li>
                                            <li class="tab" data-bind="css: edit_fabric_active_tab('advanced')">
                                                <a tabindex="0" data-bind="attr:{ href:edit_fabric_tab_link()+'/advanced' }">
                                                    <div class="tab__heading">Advanced</div>
                                                </a>
                                            </li>
                                        </ul>
                                    </div>
                                    <div class="col-md-10">
                                        <div class="tab-content">
                                            <!-- connectivity settings -->
                                            <div class="tab-pane" data-bind="css: edit_fabric_active_tab('connectivity')">
                                                <div class="row half-margin-bottom">
                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <div class="form-group__text">
                                                                <input type="text" data-bind="value:current_fabric.apic_hostname, attr:{ disabled: app_mode()}" />
                                                                <label>Hostname</label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row half-margin-bottom" data-bind="visible: app_mode()">
                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <div class="form-group__text">
                                                                <input type="text" disabled data-bind="value:current_fabric.apic_cert" />
                                                                <label>Certificate File</label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row half-margin-bottom">
                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <div class="form-group__text">
                                                                <input type="text" data-bind="value:current_fabric.apic_username, attr:{ disabled: app_mode() }" />
                                                                <label>APIC Username</label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row half-margin-bottom" data-bind="visible: !app_mode()">
                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <div class="form-group__text">
                                                                <input type="password" data-bind="value:current_fabric.apic_password" />
                                                                <label>APIC Password</label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row half-margin-bottom">
                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <div class="form-group__text">
                                                                <input type="text" data-bind="value:current_fabric.ssh_username" />
                                                                <label>SSH Username</label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row half-margin-bottom">
                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <div class="form-group__text">
                                                                <input type="password" data-bind="value:current_fabric.ssh_password" />
                                                                <label>SSH Password</label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- end connectivity settings -->

                                            <!-- notification settings -->
                                            <div class="tab-pane" data-bind="css: edit_fabric_active_tab('notifications')">
                                                <div class="row half-margin-bottom">
                                                    <div class="col-md-3">
                                                        <div class="form-group">
                                                            <div class="form-group__text">
                                                                <input type="text" data-bind="value:current_fabric.settings.syslog_server" />
                                                                <label>Syslog Server</label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-3">
                                                        <div class="form-group">
                                                            <div class="form-group__text">
                                                                <input type="number" data-bind="value:current_fabric.settings.syslog_port" />
                                                                <label>Syslog Port</label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-3 base-margin-top">
                                                        <button class="btn btn--small btn--secondary"
                                                                data-bind="click:function(){test_fabric_notification('syslog')}">
                                                            <span class="icon-check"></span> Send test syslog
                                                        </button>
                                                    </div>
                                                </div>
                                                <div class="row half-margin-bottom">
                                                    <div class="col-md-6">
                                                        <div class="form-group input--icon">
                                                            <div class="form-group__text">
                                                                <input type="text" data-bind="value:current_fabric.settings.email_address" />
                                                                <label>Email Address</label>
                                                                <button type="button" class="link">
                                                                    <span class="icon-email"></span>
                                                                </button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-3 base-margin-top">
                                                        <button class="btn btn--small btn--secondary"
                                                                data-bind="click:function(){test_fabric_notification('email')}">
                                                            <span class="icon-check"></span> Send test email
                                                        </button>
                                                    </div>
                                                </div>
                                                <div class="row half-margin-bottom base-margin-top">
                                                    <div class="col-md-2">
                                                        <div class="form-group">
                                                            <label class="switch">
                                                                <input type="checkbox" data-bind="checked: current_fabric.settings.notify_move_syslog"/>
                                                                <span class="switch__input"></span>
                                                                <span class="switch__label">Move Syslog</span>
                                                            </label>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-2">
                                                        <div class="form-group">
                                                            <label class="switch">
                                                                <input type="checkbox" data-bind="checked: current_fabric.settings.notify_offsubnet_syslog"/>
                                                                <span class="switch__input"></span>
                                                                <span class="switch__label">OffSubnet Syslog</span>
                                                            </label>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-2">
                                                        <div class="form-group">
                                                            <label class="switch">
                                                                <input type="checkbox" data-bind="checked: current_fabric.settings.notify_stale_syslog"/>
                                                                <span class="switch__input"></span>
                                                                <span class="switch__label">Stale Syslog</span>
                                                            </label>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-2">
                                                        <div class="form-group">
                                                            <label class="switch">
                                                                <input type="checkbox" data-bind="checked: current_fabric.settings.notify_rapid_syslog"/>
                                                                <span class="switch__input"></span>
                                                                <span class="switch__label">Rapid Syslog</span>
                                                            </label>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-2">
                                                        <div class="form-group">
                                                            <label class="switch">
                                                                <input type="checkbox" data-bind="checked: current_fabric.settings.notify_clear_syslog"/>
                                                                <span class="switch__input"></span>
                                                                <span class="switch__label">Remediate Syslog</span>
                                                            </label>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row half-margin-bottom base-margin-top">
                                                    <div class="col-md-2">
                                                        <div class="form-group">
                                                            <label class="switch">
                                                                <input type="checkbox" data-bind="checked: current_fabric.settings.notify_move_email"/>
                                                                <span class="switch__input"></span>
                                                                <span class="switch__label">Move Email</span>
                                                            </label>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-2">
                                                        <div class="form-group">
                                                            <label class="switch">
                                                                <input type="checkbox" data-bind="checked: current_fabric.settings.notify_offsubnet_email"/>
                                                                <span class="switch__input"></span>
                                                                <span class="switch__label">OffSubnet Email</span>
                                                            </label>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-2">
                                                        <div class="form-group">
                                                            <label class="switch">
                                                                <input type="checkbox" data-bind="checked: current_fabric.settings.notify_stale_email"/>
                                                                <span class="switch__input"></span>
                                                                <span class="switch__label">Stale Email</span>
                                                            </label>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-2">
                                                        <div class="form-group">
                                                            <label class="switch">
                                                                <input type="checkbox" data-bind="checked: current_fabric.settings.notify_rapid_email"/>
                                                                <span class="switch__input"></span>
                                                                <span class="switch__label">Rapid Email</span>
                                                            </label>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-2">
                                                        <div class="form-group">
                                                            <label class="switch">
                                                                <input type="checkbox" data-bind="checked: current_fabric.settings.notify_clear_email"/>
                                                                <span class="switch__input"></span>
                                                                <span class="switch__label">Remediate Email</span>
                                                            </label>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- end notification settings -->

                                            <!-- remediate settings -->
                                            <div class="tab-pane" data-bind="css: edit_fabric_active_tab('remediate')">
                                                <div class="row half-margin-bottom">
                                                    <div class="form-group">
                                                        <label class="switch">
                                                            <input type="checkbox" data-bind="checked: current_fabric.settings.auto_clear_offsubnet"/>
                                                            <span class="switch__input"></span>
                                                            <span class="switch__label">Auto Clear OffSubnet Endpoints</span>
                                                        </label>
                                                    </div>
                                                </div>
                                                <div class="row half-margin-bottom">
                                                    <div class="form-group">
                                                        <label class="switch">
                                                            <input type="checkbox" data-bind="checked: current_fabric.settings.auto_clear_stale"/>
                                                            <span class="switch__input"></span>
                                                            <span class="switch__label">Auto Clear Stale Endpoints</span>
                                                        </label>
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- end remediate settings -->

                                            <!-- advanced settings -->
                                            <div class="tab-pane" data-bind="css: edit_fabric_active_tab('advanced')">
                                                <div class="row half-margin-bottom">
                                                    <blockquote class="">
                                                    Each analysis feature can be enabled/disabled as needed. Disabling analysis for uninteresting events can
                                                    improve worker efficiency. By default, analysis is enabled for all events. 
                                                    See the online documentation for more information about each feature.
                                                    </blockquote>
                                                </div>
                                                <div class="row base-margin-bottom">
                                                    <div class="col-md-3">
                                                        <div class="form-group">
                                                            <label class="switch">
                                                                <input type="checkbox" data-bind="checked: current_fabric.settings.analyze_move"/>
                                                                <span class="switch__input"></span>
                                                                <span class="switch__label">Analyze Move</span>
                                                            </label>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-3">
                                                        <div class="form-group">
                                                            <label class="switch">
                                                                <input type="checkbox" data-bind="checked: current_fabric.settings.analyze_offsubnet"/>
                                                                <span class="switch__input"></span>
                                                                <span class="switch__label">Analyze OffSubnet</span>
                                                            </label>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-3">
                                                        <div class="form-group">
                                                            <label class="switch">
                                                                <input type="checkbox" data-bind="checked: current_fabric.settings.analyze_stale"/>
                                                                <span class="switch__input"></span>
                                                                <span class="switch__label">Analyze Stale</span>
                                                            </label>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-3">
                                                        <div class="form-group">
                                                            <label class="switch">
                                                                <input type="checkbox" data-bind="checked: current_fabric.settings.analyze_rapid"/>
                                                                <span class="switch__input"></span>
                                                                <span class="switch__label">Analyze Rapid</span>
                                                            </label>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row base-margin-bottom">
                                                    <blockquote class="">
                                                    Fabric monitor events (i.e., starting and stopping the monitor) are wrapped at a configurable count.
                                                    Endpoint events are also wrapped within the database. Some events, such as local endpoint history and
                                                    endpoint moves, are wrapped per endpoint. Other events, such as offsubnet and stale events, are
                                                    wrapped per node and per endpoint. 
                                                    </blockquote>
                                                </div>
                                                <div class="row base-margin-bottom">
                                                    <div class="col-md-3">
                                                        <div class="form-group">
                                                            <div class="form-group__text">
                                                                <input type="number" data-bind="value:current_fabric.max_events" />
                                                                <label>Max Fabric Monitor Events</label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-3">
                                                        <div class="form-group">
                                                            <div class="form-group__text">
                                                                <input type="number" data-bind="value:current_fabric.settings.max_endpoint_events" />
                                                                <label>Max Endpoint Events</label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-3">
                                                        <div class="form-group">
                                                            <div class="form-group__text">
                                                                <input type="number" data-bind="value:current_fabric.settings.max_per_node_endpoint_events" />
                                                                <label>Max Per-Node Endpoint Events</label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row base-margin-bottom">
                                                    <blockquote class="">
                                                    It is helpful be notified when an endpoint creating a high number of events. This often indicates 
                                                    that the endpoint is unstable.
                                                    When a endpoint is flagged as rapid, analysis is temporarily disabled for that
                                                    endpoint and notifications are sent.
                                                    Endpoints events are counted across all nodes and a rate of events per minute is calculated at 
                                                    regular intervals. When the configured threshold of events per minute is exceeded, then endpoint
                                                    is flagged as rapid and analysis is disabled for the holdtime.  Additionally, if refresh is 
                                                    enabled, an API refresh request is sent to determine the current state of the endpoint after it
                                                    is no longer marked as rapid.
                                                    </blockquote>
                                                </div>
                                                <div class="row base-margin-bottom">
                                                    <div class="col-md-3">
                                                        <div class="form-group">
                                                            <label class="switch">
                                                                <input type="checkbox" data-bind="checked: current_fabric.settings.refresh_rapid"/>
                                                                <span class="switch__input"></span>
                                                                <span class="switch__label">Rapid Refresh</span>
                                                            </label>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row base-margin-bottom">
                                                    <div class="col-md-3">
                                                        <div class="form-group">
                                                            <div class="form-group__text">
                                                                <input type="number" data-bind="value:current_fabric.settings.rapid_threshold" />
                                                                <label>Rapid Event Threshold</label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-3">
                                                        <div class="form-group">
                                                            <div class="form-group__text">
                                                                <input type="number" data-bind="value:current_fabric.settings.rapid_holdtime" />
                                                                <label>Rapid Holdtime (seconds)</label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row base-margin-bottom">
                                                    <blockquote class="">
                                                    When stale analysis is enabled, there are a few events that user may not wish to be treated as a stale
                                                    event. A stale endpoint is generally a remote learn (XR) pointing to a leaf where the endpoint is 
                                                    no longer local. If the endpoint is no longer local in the fabric and the XR entry still exists on 
                                                    a node in the fabric, then the 'stale-no-local' logic is applied. If the endpoint is local on 
                                                    multiple nodes at the same time, then the last local node is assumed to be the correct entry and
                                                    the 'stale-multiple-local' logic is applied.  Note, this logic does not apply to vpc-attached endpoints
                                                    which are expected to be learned on both nodes within the vpc.
                                                    </blockquote>
                                                </div>
                                                <div class="row base-margin-bottom">
                                                    <div class="col-md-3">
                                                        <div class="form-group">
                                                            <label class="switch">
                                                                <input type="checkbox" data-bind="checked: current_fabric.settings.stale_no_local"/>
                                                                <span class="switch__input"></span>
                                                                <span class="switch__label">Stale-no-local</span>
                                                            </label>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-3">
                                                        <div class="form-group">
                                                            <label class="switch">
                                                                <input type="checkbox" data-bind="checked: current_fabric.settings.stale_multiple_local"/>
                                                                <span class="switch__input"></span>
                                                                <span class="switch__label">Stale-multiple-local</span>
                                                            </label>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row base-margin-bottom">
                                                    <blockquote class="">
                                                    subscriptions are enabled for several MOs during the initial db build. If events are received on the subscription 
                                                    before initialization has completed these events can be queued and serviced after initialization. The number of 
                                                    events queued is dependent on the rate of events and the build time. It may be desirable to ignore the events during 
                                                    initialization, in which case queue events should be disabled.
                                                    </blockquote>
                                                </div>
                                                <div class="row base-margin-bottom">
                                                    <div class="col-md-3">
                                                        <div class="form-group">
                                                            <label class="switch">
                                                                <input type="checkbox" data-bind="checked: current_fabric.settings.queue_init_events"/>
                                                                <span class="switch__input"></span>
                                                                <span class="switch__label">Queue initial events</span>
                                                            </label>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-3">
                                                        <div class="form-group">
                                                            <label class="switch">
                                                                <input type="checkbox" data-bind="checked: current_fabric.settings.queue_init_epm_events"/>
                                                                <span class="switch__input"></span>
                                                                <span class="switch__label">Queue initial endpoint events</span>
                                                            </label>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- end advanced settings -->
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- end fabric settings -->

                        </div>
                        <!-- dashbarod end -->

                    </div>
                </div>
            </div>
            <!-- end page content  -->
        </main>
    </div>
    <!-- end page content container -->
    </body>
</html>
